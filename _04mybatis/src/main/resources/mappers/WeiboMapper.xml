<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="re.kaguya._04mybatis.mapper.WeiboMapper">
    <insert id="insertWeibo">
        INSERT INTO weibo(content, created, user_id)
        VALUES (#{content}, #{created}, #{userId});
    </insert>

    <insert id="deleteWeibo">
        DELETE
        FROM weibo
        WHERE id = #{id};
    </insert>

    <update id="updateWeibo">
        UPDATE weibo
        SET content=#{content},
            created=#{created},
            user_id=#{userId}
        WHERE id = #{id};
    </update>

    <select id="selectWeibo" resultType="re.kaguya._04mybatis.pojo.entity.Weibo">
        SELECT id, content, created, user_id userId
        FROM weibo
        WHERE id = #{wid};
    </select>

    <select id="selectAllWeibo" resultType="re.kaguya._04mybatis.pojo.entity.Weibo">
        SELECT id, content, created, user_id userId
        FROM weibo;
    </select>

    <select id="selectWeiboTest" resultType="re.kaguya._04mybatis.pojo.entity.Weibo">
        SELECT content, created userId
        FROM weibo
        where id = #{wid};
    </select>

    <update id="dynamicUpdateWeibo">
        UPDATE weibo
        <set>
            <if test="content!=null">content=#{content},</if>
            <if test="created!=null">created=#{created},</if>
            <if test="userId!=null">user_id=#{userId}</if>
        </set>
        WHERE id=#{id};
    </update>

    <delete id="deleteByIds">
        DELETE FROM weibo WHERE id IN (
        <foreach collection="array" item="a" separator=",">
            #{a}
        </foreach>)
    </delete>

    <delete id="deleteByIds1">
        DELETE FROM weibo WHERE id IN (
        <foreach collection="list" item="a" separator=",">
            #{a}
        </foreach>)
    </delete>

    <select id="selectWeiboCount" resultType="int">
        SELECT COUNT(*)
        FROM weibo;
    </select>
</mapper>
